From 47e1cf1cae5d4c7507aa4630c68d37c0d9ba5fb6 Mon Sep 17 00:00:00 2001
From: Hin-Tak Leung <htl10@users.sourceforge.net>
Date: Thu, 4 Feb 2021 23:09:11 +0000
Subject: [PATCH 1/3] Ubuntu-raspi-5.4.0-1026.29: switch to
 CONFIG_PREEMPT_VOLUNTARY in editconfigs

Signed-off-by: Hin-Tak Leung <htl10@users.sourceforge.net>
---
 debian.raspi/config/config.common.ubuntu | 78 ++++++++++++++++++++----
 1 file changed, 65 insertions(+), 13 deletions(-)

diff --git a/debian.raspi/config/config.common.ubuntu b/debian.raspi/config/config.common.ubuntu
index 0673160e0e15..169b63e36bcc 100644
--- a/debian.raspi/config/config.common.ubuntu
+++ b/debian.raspi/config/config.common.ubuntu
@@ -250,6 +250,32 @@ CONFIG_ARCH_HIBERNATION_HEADER=y
 CONFIG_ARCH_HIBERNATION_POSSIBLE=y
 # CONFIG_ARCH_HIGHBANK is not set
 # CONFIG_ARCH_HISI is not set
+CONFIG_ARCH_INLINE_READ_LOCK=y
+CONFIG_ARCH_INLINE_READ_LOCK_BH=y
+CONFIG_ARCH_INLINE_READ_LOCK_IRQ=y
+CONFIG_ARCH_INLINE_READ_LOCK_IRQSAVE=y
+CONFIG_ARCH_INLINE_READ_UNLOCK=y
+CONFIG_ARCH_INLINE_READ_UNLOCK_BH=y
+CONFIG_ARCH_INLINE_READ_UNLOCK_IRQ=y
+CONFIG_ARCH_INLINE_READ_UNLOCK_IRQRESTORE=y
+CONFIG_ARCH_INLINE_SPIN_LOCK=y
+CONFIG_ARCH_INLINE_SPIN_LOCK_BH=y
+CONFIG_ARCH_INLINE_SPIN_LOCK_IRQ=y
+CONFIG_ARCH_INLINE_SPIN_LOCK_IRQSAVE=y
+CONFIG_ARCH_INLINE_SPIN_TRYLOCK=y
+CONFIG_ARCH_INLINE_SPIN_TRYLOCK_BH=y
+CONFIG_ARCH_INLINE_SPIN_UNLOCK=y
+CONFIG_ARCH_INLINE_SPIN_UNLOCK_BH=y
+CONFIG_ARCH_INLINE_SPIN_UNLOCK_IRQ=y
+CONFIG_ARCH_INLINE_SPIN_UNLOCK_IRQRESTORE=y
+CONFIG_ARCH_INLINE_WRITE_LOCK=y
+CONFIG_ARCH_INLINE_WRITE_LOCK_BH=y
+CONFIG_ARCH_INLINE_WRITE_LOCK_IRQ=y
+CONFIG_ARCH_INLINE_WRITE_LOCK_IRQSAVE=y
+CONFIG_ARCH_INLINE_WRITE_UNLOCK=y
+CONFIG_ARCH_INLINE_WRITE_UNLOCK_BH=y
+CONFIG_ARCH_INLINE_WRITE_UNLOCK_IRQ=y
+CONFIG_ARCH_INLINE_WRITE_UNLOCK_IRQRESTORE=y
 # CONFIG_ARCH_IOP32X is not set
 # CONFIG_ARCH_IXP4XX is not set
 # CONFIG_ARCH_K3 is not set
@@ -845,7 +871,6 @@ CONFIG_BOOT_PRINTK_DELAY=y
 CONFIG_BOUNCE=y
 CONFIG_BPF=y
 CONFIG_BPFILTER=y
-CONFIG_BPFILTER_UMH=m
 CONFIG_BPF_EVENTS=y
 CONFIG_BPF_JIT=y
 CONFIG_BPF_JIT_ALWAYS_ON=y
@@ -1053,7 +1078,6 @@ CONFIG_CB710_CORE=m
 CONFIG_CB710_DEBUG_ASSUMPTIONS=y
 CONFIG_CC10001_ADC=m
 CONFIG_CCS811=m
-CONFIG_CC_CAN_LINK=y
 CONFIG_CC_HAS_ASM_GOTO=y
 CONFIG_CC_HAS_ASM_INLINE=y
 CONFIG_CC_HAS_KASAN_GENERIC=y
@@ -1069,7 +1093,6 @@ CONFIG_CDROM_PKTCDVD=m
 CONFIG_CDROM_PKTCDVD_BUFFERS=8
 # CONFIG_CDROM_PKTCDVD_WCACHE is not set
 CONFIG_CEC_CORE=y
-# CONFIG_CEC_GPIO is not set
 CONFIG_CEC_NOTIFIER=y
 CONFIG_CEC_PLATFORM_DRIVERS=y
 CONFIG_CEPH_FS=m
@@ -1571,7 +1594,6 @@ CONFIG_DEBUG_MISC=y
 # CONFIG_DEBUG_PER_CPU_MAPS is not set
 # CONFIG_DEBUG_PINCTRL is not set
 # CONFIG_DEBUG_PLIST is not set
-# CONFIG_DEBUG_PREEMPT is not set
 # CONFIG_DEBUG_RODATA_TEST is not set
 # CONFIG_DEBUG_RSEQ is not set
 # CONFIG_DEBUG_RT_MUTEXES is not set
@@ -2377,7 +2399,16 @@ CONFIG_GAMEPORT=m
 CONFIG_GAMEPORT_L4=m
 CONFIG_GAMEPORT_NS558=m
 CONFIG_GARP=m
-CONFIG_GCC_VERSION=90300
+CONFIG_GCC_PLUGINS=y
+CONFIG_GCC_PLUGIN_ARM_SSP_PER_TASK=y
+# CONFIG_GCC_PLUGIN_CYC_COMPLEXITY is not set
+# CONFIG_GCC_PLUGIN_LATENT_ENTROPY is not set
+# CONFIG_GCC_PLUGIN_RANDSTRUCT is not set
+# CONFIG_GCC_PLUGIN_STACKLEAK is not set
+# CONFIG_GCC_PLUGIN_STRUCTLEAK_BYREF is not set
+# CONFIG_GCC_PLUGIN_STRUCTLEAK_BYREF_ALL is not set
+# CONFIG_GCC_PLUGIN_STRUCTLEAK_USER is not set
+CONFIG_GCC_VERSION=100201
 # CONFIG_GCOV_KERNEL is not set
 CONFIG_GDB_SCRIPTS=y
 # CONFIG_GEMINI_ETHERNET is not set
@@ -3075,6 +3106,31 @@ CONFIG_INIT_ENV_ARG_LIMIT=32
 # CONFIG_INIT_ON_ALLOC_DEFAULT_ON is not set
 # CONFIG_INIT_ON_FREE_DEFAULT_ON is not set
 CONFIG_INIT_STACK_NONE=y
+CONFIG_INLINE_READ_LOCK=y
+CONFIG_INLINE_READ_LOCK_BH=y
+CONFIG_INLINE_READ_LOCK_IRQ=y
+CONFIG_INLINE_READ_LOCK_IRQSAVE=y
+CONFIG_INLINE_READ_UNLOCK=y
+CONFIG_INLINE_READ_UNLOCK_BH=y
+CONFIG_INLINE_READ_UNLOCK_IRQ=y
+CONFIG_INLINE_READ_UNLOCK_IRQRESTORE=y
+CONFIG_INLINE_SPIN_LOCK=y
+CONFIG_INLINE_SPIN_LOCK_BH=y
+CONFIG_INLINE_SPIN_LOCK_IRQ=y
+CONFIG_INLINE_SPIN_LOCK_IRQSAVE=y
+CONFIG_INLINE_SPIN_TRYLOCK=y
+CONFIG_INLINE_SPIN_TRYLOCK_BH=y
+CONFIG_INLINE_SPIN_UNLOCK_BH=y
+CONFIG_INLINE_SPIN_UNLOCK_IRQ=y
+CONFIG_INLINE_SPIN_UNLOCK_IRQRESTORE=y
+CONFIG_INLINE_WRITE_LOCK=y
+CONFIG_INLINE_WRITE_LOCK_BH=y
+CONFIG_INLINE_WRITE_LOCK_IRQ=y
+CONFIG_INLINE_WRITE_LOCK_IRQSAVE=y
+CONFIG_INLINE_WRITE_UNLOCK=y
+CONFIG_INLINE_WRITE_UNLOCK_BH=y
+CONFIG_INLINE_WRITE_UNLOCK_IRQ=y
+CONFIG_INLINE_WRITE_UNLOCK_IRQRESTORE=y
 CONFIG_INOTIFY_USER=y
 CONFIG_INPUT=y
 CONFIG_INPUT_88PM80X_ONKEY=m
@@ -5230,7 +5286,7 @@ CONFIG_PLATFORM_MHU=m
 CONFIG_PLATFORM_SI4713=m
 # CONFIG_PLAT_SPEAR is not set
 CONFIG_PLIP=m
-CONFIG_PLUGIN_HOSTCC=""
+CONFIG_PLUGIN_HOSTCC="g++"
 CONFIG_PM=y
 CONFIG_PMBUS=m
 CONFIG_PMIC_ADP5520=y
@@ -5298,17 +5354,13 @@ CONFIG_PPS_CLIENT_LDISC=m
 CONFIG_PPS_CLIENT_PARPORT=m
 # CONFIG_PPS_DEBUG is not set
 CONFIG_PPTP=m
-CONFIG_PREEMPT=y
-CONFIG_PREEMPTION=y
+# CONFIG_PREEMPT is not set
 # CONFIG_PREEMPTIRQ_DELAY_TEST is not set
 # CONFIG_PREEMPTIRQ_EVENTS is not set
 CONFIG_PREEMPTIRQ_TRACEPOINTS=y
-CONFIG_PREEMPT_COUNT=y
 # CONFIG_PREEMPT_NONE is not set
 CONFIG_PREEMPT_NOTIFIERS=y
-CONFIG_PREEMPT_RCU=y
-# CONFIG_PREEMPT_TRACER is not set
-# CONFIG_PREEMPT_VOLUNTARY is not set
+CONFIG_PREEMPT_VOLUNTARY=y
 CONFIG_PREVENT_FIRMWARE_BUILD=y
 CONFIG_PRINTER=m
 CONFIG_PRINTK=y
@@ -7124,6 +7176,7 @@ CONFIG_TRACING=y
 CONFIG_TRACING_MAP=y
 CONFIG_TRACING_SUPPORT=y
 # CONFIG_TRANSPARENT_HUGEPAGE is not set
+CONFIG_TREE_RCU=y
 CONFIG_TREE_SRCU=y
 CONFIG_TRUSTED_FOUNDATIONS=y
 CONFIG_TRUSTED_KEYS=y
@@ -7196,7 +7249,6 @@ CONFIG_ULTRIX_PARTITION=y
 CONFIG_UNCOMPRESS_INCLUDE="debug/uncompress.h"
 CONFIG_UNICODE=y
 # CONFIG_UNICODE_NORMALIZATION_SELFTEST is not set
-CONFIG_UNINLINE_SPIN_UNLOCK=y
 CONFIG_UNISYSSPAR=y
 CONFIG_UNIX=y
 CONFIG_UNIX98_PTYS=y
-- 
2.29.2

